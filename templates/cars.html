{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Cars</h3>
  {% if current_user.role == 'manager' %}
    <button class="btn btn-sm btn-primary" data-bs-toggle="collapse" data-bs-target="#addCarForm">
      Add car
    </button>
  {% endif %}
</div>

{% if current_user.role == 'manager' %}
<div class="collapse mb-3" id="addCarForm">
  <div class="card card-body">
    <form method="post">
      <div class="row g-2">
        <div class="col-md-4">
          <input class="form-control" name="vin" placeholder="VIN" required>
        </div>
        <div class="col-md-2">
          <input class="form-control" name="make" placeholder="Make">
        </div>
        <div class="col-md-2">
          <input class="form-control" name="model" placeholder="Model">
        </div>
        <div class="col-md-2">
          <input class="form-control" name="year" placeholder="Year" type="number">
        </div>
        <div class="col-md-3 mt-2">
          <input class="form-control" name="owner_name" placeholder="Owner name">
        </div>
        <div class="col-md-3 mt-2">
          <input class="form-control" name="owner_phone" placeholder="Owner phone">
        </div>
      </div>
      <button class="btn btn-success mt-3" type="submit">Save</button>
    </form>
  </div>
</div>
{% endif %}

<div class="card"> <div class="card-body p-0"> <table class="table table-hover table-striped mb-0"> <thead class="table-dark"> <tr> <th>ID</th> <th>VIN</th> <th>Make</th> <th>Model</th> <th>Year</th> <th>Owner</th> </tr> </thead>
  <tbody>
    {% for car in cars %}
      <tr>
        <td>{{ car.id }}</td>
        <td>{{ car.vin }}</td>
      <td>
  <a href="{{ url_for('cars.car_details', car_id=car.id) }}">
    {{ car.make }} {{ car.model }}
  </a>
</td>

        <td>{{ car.model }}</td>
        <td>{{ car.year }}</td>
        <td>{{ car.owner_name }}</td>
      </tr>
    {% endfor %}
</tbody> </table> </div> </div>
{% endblock %}

