{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Parts inventory</h3>
  {% if current_user.role == 'manager' %}
    <button class="btn btn-sm btn-primary" data-bs-toggle="collapse" data-bs-target="#addPartForm">
      Add part
    </button>
  {% endif %}
</div>

{% if current_user.role == 'manager' %}
<div class="collapse mb-3" id="addPartForm">
  <div class="card card-body">
    <form method="post">
      <div class="row g-2">
        <div class="col-md-3">
          <input class="form-control" name="part_number" placeholder="Part number" required>
        </div>
        <div class="col-md-3">
          <input class="form-control" name="name" placeholder="Name" required>
        </div>
        <div class="col-md-3">
          <input class="form-control" name="quantity" placeholder="Quantity" type="number">
        </div>
        <div class="col-md-3">
          <input class="form-control" name="unit_price" placeholder="Unit price" type="number" step="0.01">
        </div>
        <div class="col-12 mt-2">
          <textarea class="form-control" name="description" placeholder="Description"></textarea>
        </div>
      </div>
      <button class="btn btn-success mt-3" type="submit">Save</button>
    </form>
  </div>
</div>
{% endif %}

<div class="card">
  <div class="card-body p-0">
    <table class="table table-hover table-striped mb-0">
      <thead class="table-dark">

  <thead>
    <tr>
      <th>ID</th><th>Part #</th><th>Name</th><th>Qty</th><th>Price</th>
    </tr>
  </thead>
  <tbody>
    {% for part in parts %}
      <tr>
        <td>{{ part.id }}</td>
        <td>{{ part.part_number }}</td>
        <td>{{ part.name }}</td>
        <td>{{ part.quantity }}</td>
        <td>{{ "%.2f"|format(part.unit_price) }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
